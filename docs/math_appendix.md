# –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

## 1. –û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –∏ –Ω–æ—Ç–∞—Ü–∏—è.
- U - –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, I - –º–Ω–æ–∂–µ—Å—Ç–≤–æ items, |U|, |I| - –∏—Ö —Ä–∞–∑–º–µ—Ä—ã.
- $R\in\mathbb{R}^{|U|\times|I|}$ - –º–∞—Ç—Ä–∏—Ü–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π;
- $\mathcal{O}=\{(u,i)\}$ - –Ω–∞–±–æ—Ä –Ω–∞–±–ª—é–¥–µ–Ω–∏–π.
- $\mathbf{u}_u\in\mathbb{R}^d$ - –ª–∞—Ç–µ–Ω—Ç–Ω—ã–π –≤–µ–∫—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è u;
- $\mathbf{v}_i\in\mathbb{R}^d$ - –ª–∞—Ç–µ–Ω—Ç–Ω—ã–π –≤–µ–∫—Ç–æ—Ä item i.
- $s(u,i)$ - –º–æ–¥–µ–ª—å–Ω—ã–π —Å–∫–æ—Ä (score) –¥–ª—è –ø–∞—Ä—ã u,i. –ß–∞—Å—Ç–æ $s(u,i)=\mathbf{u}_u^\top\mathbf{v}_i$.
- $\lambda$ - L2 —Ä–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è (—Å–∫–∞–ª—è—Ä).
- $\sigma(x)=\frac{1}{1+e^{-x}}$ - —Å–∏–≥–º–æ–∏–¥–∞.

## 2. KNN –º–µ—Ç–æ–¥—ã.

- **–¶–µ–ª—å:** –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –æ—Ü–µ–Ω–∫—É/—Å–∫–æ—Ä $\hat r_{ui}$ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **u** –∏ item **i** –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–ª–∏ –ø–æ—Ö–æ–∂–∏—Ö items.

### 2.1 –ö–æ—Å–∏–Ω—É—Å–Ω–∞—è —Å—Ö–æ–∂–µ—Å—Ç—å

$$sim(u,v)=\frac{\mathbf{r}_u^\top \mathbf{r}_v}{\|\mathbf{r}_u\|\|\mathbf{r}_v\|}$$

–≥–¥–µ $\mathbf{r}_u,\mathbf{r}_v$ - –≤–µ–∫—Ç–æ—Ä—ã –æ—Ü–µ–Ω–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π u –∏ v.


### 2.2. –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ü–∏—Ä—Å–æ–Ω–∞

$$sim_{\text{pearson}}(u,v)=\frac{\sum_{i\in I_{uv}}(r_{ui}-\bar r_u)(r_{vi}-\bar r_v)}{\sqrt{\sum_{i\in I_{uv}}(r_{ui}-\bar r_u)^2}\\sqrt{\sum_{i\in I_{uv}}(r_{vi}-\bar r_v)^2}}$$



**–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:**  
- $I_{uv}$ - –º–Ω–æ–∂–µ—Å—Ç–≤–æ items, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è **ùë¢** –∏ **ùë£** –æ—Ü–µ–Ω–∏–ª–∏. –¢–æ–ª—å–∫–æ –ø–æ –Ω–∏–º –º–æ–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏—é.
- $r_{ui} -\bar ùëü_ùë¢$ - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ ùë¢ –¥–ª—è item **ùëñ** –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–æ **ùë¢**. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è **ùë£**. 
- $\sum_{i\in I_{uv}}(r_{ui}-\bar r_u)(r_{vi}-\bar r_v)$ - —Å—É–º–º–∞—Ä–Ω–∞—è ¬´–∫–æ–æ–ø–µ—Ä–∞—Ü–∏—è¬ª –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π; –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è, –µ—Å–ª–∏ –æ–±–∞ —Å–∫–ª–æ–Ω–Ω—ã –æ—Ü–µ–Ω–∏–≤–∞—Ç—å –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ items –≤—ã—à–µ/–Ω–∏–∂–µ —Å–≤–æ–∏—Ö —Å—Ä–µ–¥–Ω–∏—Ö.
- $\sqrt{\sum (r_{ui}-\bar r_u)^2}\sqrt{\sum (r_{vi}-\bar r_v)^2}$ ‚Äî –Ω–æ—Ä–º–∏—Ä—É—é—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å (–¥–ª–∏–Ω—ã —Ü–µ–Ω—Ç—Ä–æ–≤—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤), –¥–µ–ª–∞–µ—Ç –º–µ—Ç—Ä–∏–∫—É –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –æ—Ç —Å–∏–ª—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π.

**–Ω—é–∞–Ω—Å:** 
- –ø—Ä–∏ –Ω—É–ª–µ–≤–æ–º –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ –ø—Ä–∏–Ω—è—Ç–æ —Å—á–∏—Ç–∞—Ç—å –ø–æ—Ö–æ–∂–µ—Å—Ç—å —Ä–∞–≤–Ω–æ–π –Ω—É–ª—é , –ø—Ä–∏ –º–∞–ª—ã—Ö $|I_{uv}|$ –ø—Ä–∏–º–µ–Ω—è—Ç—å shrinkage:  
${sim}'=\frac{|I_{uv}|}{|I_{uv}|+\kappa}\ {sim}_{\text{pearson}}(u,v).$
- –≥–¥–µ $\kappa$ ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä (–æ–±—ã—á–Ω–æ –¥–µ—Å—è—Ç–∫–∏ ‚Äî —Å–æ—Ç–Ω–∏).
- –≤ item‚ÄëKNN –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –ª–∏–±–æ –æ–±–Ω—É–ª—è—é—Ç, –ª–∏–±–æ –æ—Ç–¥–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç).

### 2.3 Adjusted Cosine

$sim_{{adjcos}}(i,i')=\frac{\sum_{u\in I_{ii'}} (r_{ui}-\bar r_u)\,(r_{ui'}-\bar r_u)}{\sqrt{\displaystyle\sum_{u\in I_{ii'}} (r_{ui}-\bar r_u)^2}\;\sqrt{\displaystyle\sum_{u\in I_{ii'}} (r_{ui'}-\bar r_u)^2}}.$

- $r_{ui} -\bar ùëü_ùë¢$ - –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏ ùë¢ –¥–ª—è item ùëñ –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –ø–æ ùë¢. –£—á–µ—Ç —Å–º–µ—â–µ–Ω–∏—è –æ—Ü–µ–Ω–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π


## 3. –¢–µ–∫—Å—Ç–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã —Å—Ö–æ–∂–µ—Å—Ç–∏
### 3.1 TF-IDF (Term Frequency - Inverse Document Frequency)
- **–¶–µ–ª—å:** –æ—Ü–µ–Ω–∏—Ç—å –≤–∞–∂–Ω–æ—Å—Ç—å —Ç–µ—Ä–º–∏–Ω–∞ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—Å–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
(–í —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–æ–π –∑–∞–¥–∞—á–µ —Ç–µ—Ä–º–∏–Ω—ã - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –¥–æ–∫—É–º–µ–Ω—Ç—ã - items.)
- **–§–æ—Ä–º—É–ª—ã:**

**TF (Term Frequency):**   
  
$tf(t,d) = \frac{f_{t,d}}{\sum_{t'\in d} f_{t',d}}$  
   
–≥–¥–µ $f_{t,d}$ - —á–∞—Å—Ç–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞ t –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ d

**IDF (Inverse Document Frequency):**  
  
$idf(t,D) = \log\frac{N}{|{d\in D: t\in d}|}$  
    
–≥–¥–µ N - –æ–±—â–µ–µ —á–∏—Å–ª–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ D

**TF-IDF:**   
$tfidf(t,d,D) = tf(t,d) \times idf(t,D)$
  
**–í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ:**  
–î–æ–∫—É–º–µ–Ω—Ç d –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫   

$\mathbf{d} = (tfidf(t_1,d,D), tfidf(t_2,d,D), \dots)$

**–°—Ö–æ–∂–µ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: ** 
–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ—Å–∏–Ω—É—Å–Ω—É—é –º–µ—Ä—É –º–µ–∂–¥—É TF-IDF –≤–µ–∫—Ç–æ—Ä–∞–º–∏.

### 3.2 BM25 (Best Match 25)
**–¶–µ–ª—å**: –≤–∑–≤–µ—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è TF-IDF –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∑–∞–ø—Ä–æ—Å—É.
–†–∞–Ω–≥–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è items: —É—á–∏—Ç—ã–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏ –¥–ª–∏–Ω—É ¬´–¥–æ–∫—É–º–µ–Ω—Ç–∞¬ª (–ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è). –í —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –∫–∞–∫ –¥–æ–∫—É–º–µ–Ω—Ç, item ‚Äî –∫–∞–∫ —Ç–µ—Ä–º–∏–Ω.

**–§–æ—Ä–º—É–ª–∞:**

$BM25(q,d)=‚àë_{t‚ààq} IDF(t)‚ãÖ \frac{f_{t,d}*(k_1+1)}{f_{t,d} + k_1‚ãÖ(1‚àíb+b‚ãÖ \frac{‚à£d‚à£}{avgdl})}$
‚Äã
 

**–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:**

$q$ - –∑–∞–ø—Ä–æ—Å, $d$ - –¥–æ–∫—É–º–µ–Ω—Ç

$f_{t,d}$ - —á–∞—Å—Ç–æ—Ç–∞ —Ç–µ—Ä–º–∏–Ω–∞ t –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ d

$|d|$ - –¥–ª–∏–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ—Ä–º–∏–Ω–æ–≤)

$avgdl$ - —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

$k_1$, $b$ - —Å–≤–æ–±–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–±—ã—á–Ω–æ $k_1 \in [1.2, 2.0]$, $b = 0.75$)

$IDF(t) = \log\frac{N - n_t + 0.5}{n_t + 0.5}$ (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ BM25:**

–£—á–µ—Ç –¥–ª–∏–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞: –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç TF –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏–Ω—ã

–ù–∞—Å—ã—â–µ–Ω–∏–µ TF: –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö $f_{t,d}$ –≤–∫–ª–∞–¥ —Ç–µ—Ä–º–∏–Ω–∞ –∞—Å–∏–º–ø—Ç–æ—Ç–∏—á–µ—Å–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω

–ë–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤ –∫ –≤–∞—Ä–∏–∞—Ü–∏—è–º –¥–ª–∏–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤  

**–û–±–∞ –º–µ—Ç–æ–¥–∞ —à–∏—Ä–æ–∫–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—Ö–æ–∂–µ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑—Ä–µ–∂–µ–Ω—ã.**



# '############# TODO ##################'

